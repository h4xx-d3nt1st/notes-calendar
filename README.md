#  Notes Calendar

> REST-ÑĞµÑ€Ğ²Ğ¸Ñ Ğ´Ğ»Ñ Ğ²ĞµĞ´ĞµĞ½Ğ¸Ñ Ğ·Ğ°Ğ¼ĞµÑ‚Ğ¾Ğº Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹ API [IsDayOff.ru](https://isdayoff.ru).  
> ĞŸĞ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµÑ‚ ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ, ÑƒĞ´Ğ°Ğ»ÑÑ‚ÑŒ Ğ¸ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ°Ñ‚Ñ€Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸ Ğ¿Ğ¾ Ğ´Ğ°Ñ‚Ğ°Ğ¼, Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑÑ Ñ‚Ğ¸Ğ¿ Ğ´Ğ½Ñ (Ñ€Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ğ¹ / Ğ¿Ñ€Ğ°Ğ·Ğ´Ğ½Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ / ÑĞ¾ĞºÑ€Ğ°Ñ‰Ñ‘Ğ½Ğ½Ñ‹Ğ¹).

---

## Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|------------|------------|
| **Java 17** | ÑĞ·Ñ‹Ğº Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ |
| **Spring Boot 2.7** | Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ²ĞµĞ±-Ñ„Ñ€ĞµĞ¹Ğ¼Ğ²Ğ¾Ñ€Ğº |
| **Gradle 8.10.1** | ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° ÑĞ±Ğ¾Ñ€ĞºĞ¸ |
| **PostgreSQL 15** | Ğ±Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… |
| **Spring Data JPA** | ORM Ğ¸ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ‘Ğ” |
| **Flyway** | Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ‘Ğ” |
| **Lombok** | Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ´Ğ° |
| **Logback / Log4j2** | Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ |
| **Apache POI** | ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ·Ğ°Ğ¼ĞµÑ‚Ğ¾Ğº Ğ² Excel |
| **Swagger / OpenAPI** | Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ API |
| **Prometheus + Grafana** | Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ¸ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ (Ğ¾Ğ¿Ñ†.) |

---

##  Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

###  Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 1 â€” Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº (Ğ±ĞµĞ· Docker)

#### 1. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸:
- Java 17+  
- PostgreSQL 15+  
- Gradle (ĞµÑĞ»Ğ¸ Ğ½Ğµ Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½)

#### 2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ±Ğ°Ğ·Ñƒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:
```bash
psql -U postgres
CREATE DATABASE notesdb;
```

#### 3. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
ĞÑ‚Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ `src/main/resources/application.yml` Ğ¸Ğ»Ğ¸ `.env`:
```yaml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/notesdb
    username: postgres
    password: postgres
  jpa:
    hibernate:
      ddl-auto: validate
```

#### 4. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
```bash
./gradlew bootRun
```
Ğ¸Ğ»Ğ¸ ÑĞ¾Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ jar:
```bash
./gradlew clean build
java -jar build/libs/notes-calendar-*.jar
```

#### 5. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ:
ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ Ğ² Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğµ:
```
http://localhost:8080/swagger-ui.html
```
Ğ¸Ğ»Ğ¸ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ:
```bash
curl "http://localhost:8080/api/v1/notes/day-notes?date=2025-11-12"
```

---

### ğŸ³ Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 2 â€” Ğ·Ğ°Ğ¿ÑƒÑĞº Ñ‡ĞµÑ€ĞµĞ· Docker Compose

#### 1. Ğ¡ĞºĞ»Ğ¾Ğ½Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹:
```bash
git clone https://github.com/h4xx-d3nt1st/notes-calendar.git
cd notes-calendar
```

#### 2. ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ÑŒÑ‚Ğµ `.env` (Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€):
```env
POSTGRES_DB=notesdb
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
SPRING_DATASOURCE_URL=jdbc:postgresql://db:5432/notesdb
```

#### 3. ĞŸĞ¾Ğ´Ğ½Ğ¸Ğ¼Ğ¸Ñ‚Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹:
```bash
docker-compose up -d
```

#### 4. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°:
ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ±ÑƒĞ´ĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ Ğ¿Ğ¾ Ğ°Ğ´Ñ€ĞµÑÑƒ:
```
http://localhost:8080
```

Swagger UI:
```
http://localhost:8080/swagger-ui.html
```

PostgreSQL:
```
localhost:5432 (user=postgres, pass=postgres)
```

Grafana (ĞµÑĞ»Ğ¸ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ°):
```
http://localhost:3000 (login: admin / admin)
```

---

##  ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° API (Ñ‡ĞµÑ€ĞµĞ· curl / Postman)

###  Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸
```bash
curl -X POST http://localhost:8080/api/v1/notes   -H "Content-Type: application/json"   -d '{"date":"2025-11-12","content":"ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Notes Calendar"}'
```

###  ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ¼ĞµÑ‚Ğ¾Ğº Ğ·Ğ° Ğ´ĞµĞ½ÑŒ
```bash
curl "http://localhost:8080/api/v1/notes/day-notes?date=2025-11-12"
```

ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°:
```json
{
  "date": "2025-11-12",
  "holiday": false,
  "holidayKind": "WORKDAY",
  "notes": [
    {"id": 56, "content": "ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Notes Calendar"}
  ]
}
```

###  ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸
```bash
curl -X PUT http://localhost:8080/api/v1/notes/56   -H "Content-Type: application/json"   -d '{"content":"Ğ˜Ğ·Ğ¼ĞµĞ½Ñ‘Ğ½Ğ½Ğ°Ñ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ°"}'
```

###  Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ
```bash
curl -X DELETE http://localhost:8080/api/v1/notes/56
```

---

##  ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ÑĞ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚Ñ‹

| ĞœĞµÑ‚Ğ¾Ğ´ | URL | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|-------|-----|------------|
| POST | `/api/v1/notes` | ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²ÑƒÑ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºÑƒ |
| GET | `/api/v1/notes/day-notes?date=` | Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸ Ğ·Ğ° Ğ´Ğ°Ñ‚Ñƒ |
| PUT | `/api/v1/notes/{id}` | Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºÑƒ |
| DELETE | `/api/v1/notes/{id}` | ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¾Ğ´Ğ½Ñƒ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºÑƒ |
| DELETE | `/api/v1/notes/day?date=` | ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸ Ğ·Ğ° Ğ´ĞµĞ½ÑŒ |
| GET | `/api/v1/holiday?date=` | ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ´Ğ½Ñ Ñ‡ĞµÑ€ĞµĞ· IsDayOff |
| GET | `/api/v1/notes/export?format=xls` | ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ·Ğ°Ğ¼ĞµÑ‚Ğ¾Ğº Ğ² Excel |

---

##  ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸

### Actuator / Prometheus
```
http://localhost:8080/actuator/health
http://localhost:8080/actuator/prometheus
```

ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ‡ĞµÑ€ĞµĞ· Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ»:
```bash
curl -s http://localhost:8080/actuator/prometheus | grep http_server_requests_seconds_count | head
```

### Grafana (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
```
http://localhost:3000
login: admin
password: admin
```

JSON-Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ² `/grafana/dashboard.json`.

---

##  ĞŸĞ¾Ğ»ĞµĞ·Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

| ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|----------|------------|
| `./gradlew clean build` | ÑĞ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ |
| `./gradlew bootRun` | Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ |
| `docker-compose up -d` | Ğ¿Ğ¾Ğ´Ğ½ÑÑ‚ÑŒ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹ |
| `docker-compose logs -f app` | Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ |
| `./gradlew test` | Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ ÑĞ½Ğ¸Ñ‚-Ñ‚ĞµÑÑ‚Ñ‹ |
| `./gradlew javadoc` | ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ |

---

##  Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
Ğ›Ğ¾Ğ³Ğ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑÑ‚ÑÑ Ğ²:
```
logs/app.log
```
ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹:
```
INFO  Created new note: 2025-11-12 -> ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°
WARN  HolidayService - API timeout, fallback=WORKDAY
ERROR Database connection lost
```

---

##  ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
src/
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ java/com/example/notescalendar/
â”‚   â”‚   â”œâ”€â”€ controller/   â†’ REST-ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€Ñ‹
â”‚   â”‚   â”œâ”€â”€ service/      â†’ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
â”‚   â”‚   â”œâ”€â”€ repository/   â†’ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº PostgreSQL
â”‚   â”‚   â”œâ”€â”€ entity/       â†’ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â”‚   â”‚   â””â”€â”€ NotesCalendarApplication.java
â”‚   â””â”€â”€ resources/
â”‚       â”œâ”€â”€ application.yml
â”‚       â”œâ”€â”€ db/migration/
â”‚       â”œâ”€â”€ log4j2.xml
â”‚       â””â”€â”€ static/
â””â”€â”€ test/
    â””â”€â”€ java/             â†’ JUnit-Ñ‚ĞµÑÑ‚Ñ‹
```

---

##  ĞĞ²Ñ‚Ğ¾Ñ€

**ĞœĞ¸Ñ…Ğ°Ğ¸Ğ» Ğ ĞµĞ·Ñ†Ğ¾Ğ² (Ğ˜ĞšĞ‘-41)**  
ĞšĞ°Ñ„ĞµĞ´Ñ€Ğ° Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ğ¾Ğ¹ Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸, Ğ¡ĞŸĞ±Ğ“Ğ£Ğ¢  
ğŸ“ [GitHub: h4xx-d3nt1st](https://github.com/h4xx-d3nt1st/notes-calendar)

---
